<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>ä¸ºä»€ä¹ˆé€‰æ‹©MVVMè€Œä¸æ˜¯MVP - Androidæ¶æ„</title>
    <meta name="description" content="  MVC  MVP  MVVM  MVVMå…¶å®ä¸MVPæ¶æ„çœ‹èµ·æ¥å¾ˆç›¸ä¼¼  ä»£ç ç¤ºä¾‹Androidæœ¬èº«è¢«å†™æˆMVCï¼Œå…¶ä¸­Activityæˆ–å¤šæˆ–å°‘åœ°è´Ÿè´£æ‰€æœ‰äº‹æƒ…ã€‚å¯¹äºå¯èƒ½è¶³å¤Ÿçš„ç®€å•åº”ç”¨ï¼Œä½†éšç€å¤æ‚æ€§çš„å¢åŠ ï¼Œé—®é¢˜çš„æ•°é‡å’Œæ°´å¹³ä¹Ÿä¼šæé«˜ã€‚ç°åœ¨æœ‰è®¸å¤šä¸åŒçš„æ¶æ„æ–¹æ³•ï¼Œå¦‚MVPï¼ŒFLUXï¼ŒMVIï¼ŒMVVMç­‰ï¼Œå®ƒä»¬åœ¨è§£å†³ä¸Šè¿°é—®é¢˜...">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8v3czwksspqlg14i.css">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://localhost:4000/2019/06/17/%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9MVVM%E8%80%8C%E4%B8%8D%E6%98%AFMVP-Android%E6%9E%B6%E6%9E%84/">
    <link rel="alternate" type="application/rss+xml" title="WHS" href="http://localhost:4000/feed.xml ">

    <link rel="stylesheet" type="text/css" href="/css/sunburst.css ">
    <script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>

    
    <!--<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>-->


    <script>
    // ç™¾åº¦ç»Ÿè®¡ä»£ç 
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?73b6a88ab52561dd17cdc4f6284caaf0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    <script>
    // google analytics
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-96638437-1', 'auto');
      ga('send', 'pageview');

    </script>



<!--googleå¹¿å‘Š-->
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6707426947779377",
    enable_page_level_ads: true
  });
</script>
</head>


  <body onload="PR.prettyPrint()">

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">WHS</a>
        <small>GIS Engineer</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/collection/">
                        
                            <i class="fa fa-bookmark"></i>Android Collections
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/about/">
                        
                            <i class="fa fa-heart"></i>About
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" post>
    <div class="left">
        <h1>ä¸ºä»€ä¹ˆé€‰æ‹©MVVMè€Œä¸æ˜¯MVP - Androidæ¶æ„</h1>
        <div class="label">

            <div class="label-card">
                <i class="fa fa-calendar"></i>2019-06-17
            </div>

            <div class="label-card">
                <i class="fa fa-user"></i>WHS
                
            </div>

            <div class="label-card">
                
            </div>

            <div class="label-card">
            


<!-- <span class="point">â€¢</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#Android" title="Category: Android" rel="category">Android</a>
    
  

  <!-- <span class="point">â€¢</span> -->
</span>


            </div>

            <div class="label-card">
            
<!-- <span class="point">â€¢</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <!--a href="/tag/#Android" title="Tag: Android" rel="tag">Android</a-->
        <a href="/tag/#Android" title="Tag: Android" rel="tag">Android</a>
    
  

</span>

            </div>

        </div>
        <hr>
        <article itemscope itemtype="http://schema.org/BlogPosting">
        <ul id="markdown-toc">
  <li><a href="#mvc" id="markdown-toc-mvc">MVC</a></li>
  <li><a href="#mvp" id="markdown-toc-mvp">MVP</a></li>
  <li><a href="#mvvm" id="markdown-toc-mvvm">MVVM</a></li>
  <li><a href="#mvvmå…¶å®ä¸mvpæ¶æ„çœ‹èµ·æ¥å¾ˆç›¸ä¼¼" id="markdown-toc-mvvmå…¶å®ä¸mvpæ¶æ„çœ‹èµ·æ¥å¾ˆç›¸ä¼¼">MVVMå…¶å®ä¸MVPæ¶æ„çœ‹èµ·æ¥å¾ˆç›¸ä¼¼</a></li>
  <li><a href="#ä»£ç ç¤ºä¾‹" id="markdown-toc-ä»£ç ç¤ºä¾‹">ä»£ç ç¤ºä¾‹</a></li>
</ul>

<p>Androidæœ¬èº«è¢«å†™æˆMVCï¼Œå…¶ä¸­Activityæˆ–å¤šæˆ–å°‘åœ°è´Ÿè´£æ‰€æœ‰äº‹æƒ…ã€‚å¯¹äºå¯èƒ½è¶³å¤Ÿçš„ç®€å•åº”ç”¨ï¼Œä½†éšç€å¤æ‚æ€§çš„å¢åŠ ï¼Œé—®é¢˜çš„æ•°é‡å’Œæ°´å¹³ä¹Ÿä¼šæé«˜ã€‚
ç°åœ¨æœ‰è®¸å¤šä¸åŒçš„æ¶æ„æ–¹æ³•ï¼Œå¦‚MVPï¼ŒFLUXï¼ŒMVIï¼ŒMVVMç­‰ï¼Œå®ƒä»¬åœ¨è§£å†³ä¸Šè¿°é—®é¢˜æ–¹é¢è¯æ˜æ˜¯å¯Œæœ‰æˆæ•ˆçš„ã€‚åªè¦ä»£ç å¯ç»´æŠ¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä»»ä½•æ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿé€‚åº”å˜åŒ–ï¼Œä¸€åˆ‡è¿è¡Œè‰¯å¥½ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯å¼€å‘äººå‘˜çš„å¿«ä¹ç”Ÿæ´»ã€‚</p>

<h6 id="mvc">MVC</h6>
<p>ä¼ ç»Ÿçš„Android Appå…¶å®éƒ½æ˜¯åŸºäºMVCçš„ï¼ŒActivityï¼ŒFragmentç›¸å½“äºC,å¸ƒå±€ç›¸å½“äºV,æ•°æ®é€»è¾‘ç›¸å½“äºM
éšç€ä¸šåŠ¡çš„å¢é•¿Controlleré‡Œçš„ä»£ç ä¼šè¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œå› ä¸ºå®ƒä¸åªè¦è´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼Œè¿˜è¦æ§åˆ¶Viewçš„å±•ç¤ºã€‚ä¹Ÿå°±æ˜¯è¯´Activityã€Fragmentæ‚ç³…äº†Controllerå’ŒViewï¼Œè€¦åˆå˜å¤§ã€‚å¹¶ä¸èƒ½ç®—ä½œçœŸæ­£æ„ä¹‰ä¸Šçš„MVCã€‚</p>

<p><img src="http://www.jcodecraeer.com/uploads/20160414/1460565635729862.png" alt="" /></p>

<pre><code class="language-mermaid">graph LR
B(CONTROLLER) --&gt; C(MODEL)
C(MODEL) --&gt; A(VIEW)
A(VIEW) --&gt; C(MODEL)
A(VIEW) --&gt; B(CONTROLLER)
</code></pre>

<h6 id="mvp">MVP</h6>
<p>MVPæ¶æ„å…¶å®å¯ä»¥è¯´ä¸MVCçš„æ¶æ„è¿˜æ˜¯æœ‰å¾ˆå¤§çš„å·®åˆ«çš„ï¼Œæ•°æ®é€»è¾‘ç›¸å½“äºMï¼ŒActivityï¼ˆè´Ÿè´£Viewçš„ç»˜åˆ¶ä»¥åŠä¸ç”¨æˆ·äº¤äº’ï¼‰ç›¸å½“äºV ï¼ŒViewäºModelé—´çš„äº¤äº’åˆ™ä¸ºPå…¶å®æœ€æ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯ï¼ŒMVCä¸­æ˜¯å…è®¸Modelå’ŒViewè¿›è¡Œäº¤äº’çš„ï¼Œè€ŒMVPä¸­å¾ˆæ˜æ˜¾ï¼ŒModelä¸Viewä¹‹é—´çš„äº¤äº’ç”±Presenterå®Œæˆã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯Presenterä¸Viewä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡æ¥å£çš„</p>

<p><img src="http://www.jcodecraeer.com/uploads/20160414/1460565637114968.png" alt="" /></p>

<pre><code class="language-mermaid">graph LR
A(VIEW)--&gt; B(PRESENTER)
B(PRESENTER) --&gt; A(VIEW)
B(PRESENTER) --&gt; C(MODEL)
C(MODEL) --&gt; B(PRESENTER)
</code></pre>

<ul>
  <li>ç¼ºç‚¹
    <ol>
      <li>ç´§è€¦åˆ
å¯¹äºæ¯ä¸ªæ´»åŠ¨/ç‰‡æ®µï¼ˆè§†å›¾ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªPresenterã€‚è¿™æ˜¯ä¸€ä¸ªç¡¬çº¦æŸè§„åˆ™ã€‚Presenterä¿å­˜å¯¹Activityå’ŒActivityçš„å¼•ç”¨ä¿ç•™å¯¹presenterçš„å¼•ç”¨ã€‚1ï¼š1çš„å…³ç³»ï¼Œè¿™å°±æ˜¯æœ€å¤§é—®é¢˜æ‰€åœ¨ã€‚
éšç€è§†å›¾å¤æ‚æ€§çš„å¢åŠ ï¼Œè¿™ç§å…³ç³»çš„ç»´æŠ¤å’Œå¤„ç†ä¹Ÿä¼šå¢åŠ ã€‚
è¿™æœ€ç»ˆä¼šå¯¼è‡´æˆ‘ä»¬ä¹‹å‰é‡åˆ°çš„åŒæ ·é—®é¢˜ï¼Œå› ä¸ºè®¾è®¡çš„å¿«é€Ÿå˜åŒ–ï¼Œæˆ‘ä»¬å®é™…ä¸Šéœ€è¦ä¿®æ”¹æ•´ä¸ªå…³ç³»ã€‚
ä»æˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡â€œä»¥åˆ†å¸ƒå¼æ–¹å¼æ„å»ºäº‹ç‰©â€ä¸­æŒ‘é€‰ä¸€ä¸ªå£°æ˜ï¼Œä¸ºäº†å®ç°å®ƒå¹¶é¿å…è¿™ç§ç´§å¯†å…³ç³»ï¼ŒViewModelsè¢«å¼•å…¥ã€‚
ViewModelsæ˜¯ä¸é€»è¾‘/æ¨¡å‹å±‚äº¤äº’çš„ç®€å•ç±»ï¼Œåªæ˜¯æš´éœ²çŠ¶æ€/æ•°æ®ï¼Œå®é™…ä¸Šä¸çŸ¥é“è¯¥æ•°æ®å°†ç”±è°æˆ–å¦‚ä½•ä½¿ç”¨ã€‚åªæœ‰Viewï¼ˆActivityï¼‰ä¿å­˜å¯¹ViewModelçš„å¼•ç”¨ï¼Œåä¹‹äº¦ç„¶ï¼Œè¿™è§£å†³äº†æˆ‘ä»¬çš„ç´§è€¦åˆé—®é¢˜ã€‚å•ä¸ªè§†å›¾å¯ä»¥ä¿å­˜å¯¹å¤šä¸ªViewModelçš„å¼•ç”¨ã€‚
å³ä½¿å¯¹äºå¤æ‚çš„è§†å›¾ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥åœ¨åŒä¸€å±‚æ¬¡ç»“æ„ä¸­å…·æœ‰ä¸åŒçš„ViewModel</li>
      <li>å¯æµ‹æ€§
ç”±äºPresenterså¾ˆéš¾ç»‘å®šè§†å›¾ï¼Œå› æ­¤ç¼–å†™å•å…ƒæµ‹è¯•å˜å¾—æœ‰ç‚¹å›°éš¾ï¼Œå› ä¸ºViewå…·æœ‰ä¾èµ–æ€§ã€‚
ViewModelsç”šè‡³æ›´åŠ å•å…ƒæµ‹è¯•å‹å¥½ï¼Œå› ä¸ºå®ƒä»¬åªæ˜¯æš´éœ²çŠ¶æ€ï¼Œå› æ­¤å¯ä»¥ç‹¬ç«‹æµ‹è¯•è€Œæ— éœ€æµ‹è¯•æ•°æ®çš„æ¶ˆè€—æ–¹å¼ï¼Œç®€è€Œè¨€ä¹‹ï¼ŒViewä¸ä¾èµ–äºViewã€‚
è¿™æ˜¯ä¸¤ä¸ªä¸»è¦çš„é€‰æ‹©ï¼Œä½¿é€‰æ‹©æ˜ç¡®ã€‚å¯èƒ½æœ‰æ›´å¤šæˆ–å¯èƒ½æ²¡æœ‰ã€‚ä»¥ä¸‹è¯„è®ºæ­£åœ¨ç­‰å¾…!! ğŸ˜„</li>
    </ol>
  </li>
</ul>

<h6 id="mvvm">MVVM</h6>
<p>MVVMæ˜¯Model-View-ViewModelçš„ç®€å†™. å®ƒæ˜¯æœ‰ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šModelã€Viewã€ViewModelã€‚Modelï¼šæ•°æ®æ¨¡å‹å±‚ã€‚åŒ…å«ä¸šåŠ¡é€»è¾‘å’Œæ ¡éªŒé€»è¾‘,Viewï¼šå±å¹•ä¸Šæ˜¾ç¤ºçš„UIç•Œé¢ï¼ˆlayoutã€viewsï¼‰,ViewModelï¼šViewå’ŒModelä¹‹é—´çš„é“¾æ¥æ¡¥æ¢ï¼Œå¤„ç†è§†å›¾é€»è¾‘ã€‚
å½“Viewæœ‰ç”¨æˆ·è¾“å…¥åï¼ŒViewModelé€šçŸ¥Modelæ›´æ–°æ•°æ®ï¼ŒåŒç†Modelæ•°æ®æ›´æ–°åï¼ŒViewModelé€šçŸ¥Viewæ›´æ–°ã€‚</p>

<pre><code class="language-mermaid">graph LR
A(VIEW) --binding--- B(VIEWMODEL)
B(VIEWMODEL) --&gt; C(MODEL)
C(MODEL) --&gt; B(VIEWMODEL)
</code></pre>

<h3 id="mvvmå…¶å®ä¸mvpæ¶æ„çœ‹èµ·æ¥å¾ˆç›¸ä¼¼">MVVMå…¶å®ä¸MVPæ¶æ„çœ‹èµ·æ¥å¾ˆç›¸ä¼¼</h3>
<p><img src="https://upload-images.jianshu.io/upload_images/1605450-40b99f4f565fe170.png?imageMogr2/auto-orient/" alt="" /></p>

<h3 id="ä»£ç ç¤ºä¾‹">ä»£ç ç¤ºä¾‹</h3>

<ul>
  <li>MVVM</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * @author whs
 * @date 2019/3/29
 * æ¸…éšœæ•‘æ´
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RescueActivity</span> <span class="kd">extends</span> <span class="n">WtActivity</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="n">ActivityRescueBinding</span> <span class="n">mBinding</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">RescueViewModel</span> <span class="n">mViewModel</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">mBinding</span> <span class="o">=</span> <span class="n">DataBindingUtil</span><span class="o">.</span><span class="na">setContentView</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_rescue</span><span class="o">);</span>
        <span class="n">mBinding</span><span class="o">.</span><span class="na">toolbar</span><span class="o">.</span><span class="na">setNavigationOnClickListener</span><span class="o">(</span><span class="n">view</span> <span class="o">-&gt;</span> <span class="n">onBackPressed</span><span class="o">());</span>
        <span class="n">mBinding</span><span class="o">.</span><span class="na">tvTitle</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">rescue</span><span class="o">));</span>
        <span class="n">mBinding</span><span class="o">.</span><span class="na">ivRight</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
        <span class="n">mBinding</span><span class="o">.</span><span class="na">ivRight</span><span class="o">.</span><span class="na">setImageResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">mipmap</span><span class="o">.</span><span class="na">orders</span><span class="o">);</span>
        <span class="n">mBinding</span><span class="o">.</span><span class="na">ivRight</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="n">View</span><span class="o">.</span><span class="na">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">mViewModel</span><span class="o">.</span><span class="na">getTaskNum</span><span class="o">().</span><span class="na">getValue</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">RescueActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">ClearingActivity</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
                    <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">mViewModel</span><span class="o">.</span><span class="na">message</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="s">"æš‚æ— æ–°ä»»åŠ¡"</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">});</span>
        <span class="n">mViewModel</span> <span class="o">=</span> <span class="n">ViewModelProviders</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">this</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="n">RescueViewModel</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="n">init</span><span class="o">(</span><span class="n">mViewModel</span><span class="o">);</span>
        <span class="n">mBinding</span><span class="o">.</span><span class="na">setViewModel</span><span class="o">(</span><span class="n">mViewModel</span><span class="o">);</span>
        <span class="n">mViewModel</span><span class="o">.</span><span class="na">getTaskNum</span><span class="o">().</span><span class="na">observe</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">taskNum</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">mBinding</span><span class="o">.</span><span class="na">setViewModel</span><span class="o">(</span><span class="n">mViewModel</span><span class="o">);</span>
        <span class="o">});</span>
        <span class="n">mViewModel</span><span class="o">.</span><span class="na">loadClearTaskNum</span><span class="o">();</span>

        <span class="c1">// Check that the activity is using the layout version with</span>
        <span class="c1">// the fragment_container FrameLayout</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">mBinding</span><span class="o">.</span><span class="na">flContent</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// However, if we're being restored from a previous state,</span>
            <span class="c1">// then we don't need to do anything and should return or else</span>
            <span class="c1">// we could end up with overlapping fragments.</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">savedInstanceState</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="n">getSupportFragmentManager</span><span class="o">().</span><span class="na">beginTransaction</span><span class="o">()</span>
                    <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">fl_content</span><span class="o">,</span> <span class="n">TaskFragment</span><span class="o">.</span><span class="na">getFragment</span><span class="o">()).</span><span class="na">commit</span><span class="o">();</span>


        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span>



<span class="cm">/**
 * Created by whs on 2019/3/27
 * æ¸…éšœæ•‘æ´
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RescueViewModel</span> <span class="kd">extends</span> <span class="n">BaseViewModel</span> <span class="o">{</span>

    <span class="cm">/**è¯·éšœæ•‘æ´ä»»åŠ¡æ•°é‡*/</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">MutableLiveData</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">mTaskNum</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MutableLiveData</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="n">MutableLiveData</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="nf">getTaskNum</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mTaskNum</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * è·å–æ¸…éšœæ•‘æ´ä»»åŠ¡æ•°
     */</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">loadClearTaskNum</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">webApi</span><span class="o">.</span><span class="na">getClearRescueTaskNum</span><span class="o">().</span><span class="na">enqueue</span><span class="o">(</span><span class="k">new</span> <span class="n">BaseCallBack</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;(</span><span class="s">"æ•‘æ´ä»»åŠ¡"</span><span class="o">,</span><span class="k">this</span><span class="o">)</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onResponse</span><span class="o">(</span><span class="n">Integer</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">mTaskNum</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span>


</code></pre></div></div>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;layout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;data&gt;</span>
        <span class="nt">&lt;import</span> <span class="na">type=</span><span class="s">"android.view.View"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;import</span> <span class="na">type=</span><span class="s">"androidx.core.content.ContextCompat"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;variable</span>
            <span class="na">name=</span><span class="s">"viewModel"</span>
            <span class="na">type=</span><span class="s">"com.wtkj.baseproduct.ui.rescue.RescueViewModel"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/data&gt;</span>

    <span class="nt">&lt;androidx.constraintlayout.widget.ConstraintLayout</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

        <span class="nt">&lt;androidx.appcompat.widget.Toolbar</span>
            <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span>
            <span class="na">android:id=</span><span class="s">"@+id/toolbar"</span>
            <span class="na">android:gravity=</span><span class="s">"center"</span>
            <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">app:navigationIcon=</span><span class="s">"@drawable/ic_back"</span>
            <span class="na">android:layout_height=</span><span class="s">"?attr/actionBarSize"</span>
            <span class="na">android:background=</span><span class="s">"@color/header_black"</span>
            <span class="na">app:popupTheme=</span><span class="s">"@style/AppTheme.PopupOverlay"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;TextView</span>
                <span class="na">android:id=</span><span class="s">"@+id/tv_title"</span>
                <span class="na">android:textColor=</span><span class="s">"@color/white"</span>
                <span class="na">android:layout_gravity=</span><span class="s">"center"</span>
                <span class="na">android:textSize=</span><span class="s">"20sp"</span>
                <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
                <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>

            <span class="nt">&lt;TextView</span>
                <span class="na">android:id=</span><span class="s">"@+id/tv_right"</span>
                <span class="na">android:textColor=</span><span class="s">"@color/colorAccent"</span>
                <span class="na">android:layout_gravity=</span><span class="s">"right"</span>
                <span class="na">android:layout_marginEnd=</span><span class="s">"10dp"</span>
                <span class="na">android:textSize=</span><span class="s">"12sp"</span>
                <span class="na">android:text=</span><span class="s">"@string/title"</span>
                <span class="na">android:visibility=</span><span class="s">"gone"</span>
                <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
                <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="nt">/&gt;</span>

            <span class="nt">&lt;ImageView</span>
                <span class="na">android:id=</span><span class="s">"@+id/iv_right"</span>
                <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
                <span class="na">android:layout_height=</span><span class="s">"?attr/actionBarSize"</span>
                <span class="na">android:layout_gravity=</span><span class="s">"right"</span>
                <span class="na">android:gravity=</span><span class="s">"center"</span>
                <span class="na">android:padding=</span><span class="s">"12dp"</span>
                <span class="na">android:visibility=</span><span class="s">"visible"</span>
                <span class="na">android:layout_marginEnd=</span><span class="s">"8dp"</span>
                <span class="na">android:src=</span><span class="s">"@mipmap/orders"</span>
                <span class="nt">&gt;</span>
            <span class="nt">&lt;/ImageView&gt;</span>
        <span class="nt">&lt;/androidx.appcompat.widget.Toolbar&gt;</span>
        <span class="nt">&lt;TextView</span>
            <span class="na">android:id=</span><span class="s">"@+id/tv_notify"</span>
            <span class="na">android:layout_width=</span><span class="s">"20dp"</span>
            <span class="na">android:layout_height=</span><span class="s">"20dp"</span>
            <span class="na">android:layout_gravity=</span><span class="s">"right"</span>
            <span class="na">android:layout_margin=</span><span class="s">"10dp"</span>
            <span class="na">android:background=</span><span class="s">"@drawable/background_notify_circle_red"</span>
            <span class="na">android:gravity=</span><span class="s">"center"</span>
            <span class="na">android:textColor=</span><span class="s">"@color/white"</span>
            <span class="na">android:textSize=</span><span class="s">"12sp"</span>
            <span class="na">android:visibility=</span><span class="s">"@{viewModel.taskNum &gt; 0 ? View.VISIBLE : View.GONE}"</span>
            <span class="na">android:text=</span><span class="s">"@{String.valueOf(viewModel.taskNum)}"</span>
            <span class="na">app:layout_constraintEnd_toEndOf=</span><span class="s">"parent"</span>
            <span class="na">app:layout_constraintTop_toTopOf=</span><span class="s">"parent"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;FrameLayout</span>
            <span class="na">android:id=</span><span class="s">"@+id/fl_content"</span>
            <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"0dp"</span>
            <span class="na">app:layout_constraintBottom_toBottomOf=</span><span class="s">"parent"</span>
            <span class="na">app:layout_constraintTop_toBottomOf=</span><span class="s">"@+id/toolbar"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span>
<span class="nt">&lt;/layout&gt;</span>
</code></pre></div></div>


        </article>
        <hr>

        
        
            
            
                
                    
                
            
        
            
            
                
                    
                        
                        <h2 id="similar_posts">Similar Posts</h2>
                        <ul>
                        
                        <li class="relatedPost">
                            <a href="http://localhost:4000/2019/01/21/Android-Databinding%E4%BD%BF%E7%94%A8/">Android DataBindingä½¿ç”¨
                            
                            </a>
                        </li>
                        
                        
                    
                
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                        
                        <li class="relatedPost">
                            <a href="http://localhost:4000/2018/08/15/Android-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/">Android æ€§èƒ½ä¼˜åŒ–
                            
                            </a>
                        </li>
                        
                        
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
            
            
                
                    
                
            
                
                    
                
            
        
        
            </ul>
        

        <div class="post-recent">
    <div class="pre">
        
        <p><strong>ä¸Šä¸€ç¯‡</strong> <a href="/2019/04/23/Linux%E4%BD%BF%E7%94%A8%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83/">Linuxä½¿ç”¨ä»å…¥é—¨åˆ°æ”¾å¼ƒ</a></p>
        
    </div>
    <div class="nex">

        
    </div>
</div>


        <h2 id="comments">Comments</h2>
        



<!--ç•…è¨€æ‰“èµ-->

<!-- ç•…è¨€æ‰“èµåŠŸèƒ½ -->
<!-- ä»£ç 1ï¼šæ”¾åœ¨é¡µé¢éœ€è¦å±•ç¤ºçš„ä½ç½®  -->
<!-- å¦‚æœæ‚¨é…ç½®è¿‡sourceidï¼Œå»ºè®®åœ¨divæ ‡ç­¾ä¸­é…ç½®sourceidã€cid(åˆ†ç±»id)ï¼Œæ²¡æœ‰è¯·å¿½ç•¥  -->
<div id="cyReward" style="margin: 0 auto;text-align: center;" role="cylabs" data-use="reward"></div>
<!-- ä»£ç 2ï¼šç”¨æ¥è¯»å–è¯„è®ºæ¡†é…ç½®ï¼Œæ­¤ä»£ç éœ€æ”¾ç½®åœ¨ä»£ç 1ä¹‹åã€‚ -->
<!-- å¦‚æœå½“å‰é¡µé¢æœ‰è¯„è®ºæ¡†ï¼Œä»£ç 2è¯·å‹¿æ”¾ç½®åœ¨è¯„è®ºæ¡†ä»£ç ä¹‹å‰ã€‚ -->
<!-- å¦‚æœé¡µé¢åŒæ—¶ä½¿ç”¨å¤šä¸ªå®éªŒå®¤é¡¹ç›®ï¼Œä»¥ä¸‹ä»£ç åªéœ€è¦å¼•å…¥ä¸€æ¬¡ï¼Œåªé…ç½®ä¸Šé¢çš„divæ ‡ç­¾å³å¯ -->
<script type="text/javascript" charset="utf-8" src="https://changyan.itc.cn/js/lib/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="https://changyan.sohu.com/js/changyan.labs.https.js?appid=cysWveoyH"></script>


<!--æœ‰è¨€è¯„è®º é‚®ç®± A-->

<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2131444"></script>
<!-- UY END -->











    </div>
    <button class="anchor"><i class="fa fa-anchor"></i></button>
    <div class="right">
        <div class="wrap">

            <!-- Content -->
            <div class="side content">
                <div>
                    Content
                </div>
                <ul id="content-side" class="content-ul">
                    <li><a href="#similar_posts">Similar Posts</a></li>
                    <li><a href="#comments">Comments</a></li>
                </ul>
            </div>
            <!-- å…¶ä»–divæ¡†æ”¾åˆ°è¿™é‡Œ -->
            <!-- <div class="side">bbbb</div> -->
        </div>
    </div>
</div>
<script>
/**
 * target _blank
 */
(function() {
    var aTags = document.querySelectorAll('article a:not([id])')
    for (var i = 0; i < aTags.length; i++) {
        aTags[i].setAttribute('target', '_blank')
    }
}());
</script>
<script src="/js/pageContent.js " charset="utf-8"></script>
 <!--Google ä»£ç é«˜äº®js-->

<!--<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?lang=css&amp;skin=sunburst"></script>-->

<!--<link rel="stylesheet" type="text/css" href="prettify.css">
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>-->

<!--
<link rel="stylesheet" type="text/css" href="/css/sunburst.css">
-->


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
             æœ¬ç«™è®°å½•æˆ‘ç¼–ç¨‹ä¹‹æ—…çš„æ²¿é€”é£æ™¯ï¼ 
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/wuhongsheng" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:664116298@qq.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a> 
                   
        </p>
        <p>
            æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡ï¼Œæœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äººæ¬¡ï¼Œæœ¬æ–‡æ€»é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>æ¬¡
        </p>
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                 Theme designed by HyG.
            </span>
        </p>
    </div>
</footer>
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src=" /js/main.js " charset="utf-8"></script>
    <script src=" /js/smooth-scroll.min.js " charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
    </script>
    <!-- <script src=" /js/scroll.min.js " charset="utf-8"></script> -->
   

  </body>

</html>
